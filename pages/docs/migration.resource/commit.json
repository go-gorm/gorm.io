{"compress":true,"commitItems":[["7eb57b35-9dd4-4e27-9bd6-10adcae41d1f",1518540360529,"",[[1518540329041,["jinzhu@jinzhus-MacBook-Pro.local",[[1,0,"migration\n===\n\n\n\n## Migration\n\n### Auto Migration\n\nAutomatically migrate your schema, to keep your schema update to date.\n\n**WARNING:** AutoMigrate will **ONLY** create tables, missing columns and missing indexes, and **WON'T** change existing column's type or delete unused columns to protect your data.\n\n```go\ndb.AutoMigrate(&User{})\n\ndb.AutoMigrate(&User{}, &Product{}, &Order{})\n\n// Add table suffix when create tables\ndb.Set(\"gorm:table_options\", \"ENGINE=InnoDB\").AutoMigrate(&User{})\n```\n\n### Has Table\n\n```go\n// Check model `User`'s table exists or not\ndb.HasTable(&User{})\n\n// Check table `users` exists or not\ndb.HasTable(\"users\")\n```\n\n### Create Table\n\n```go\n// Create table for model `User`\ndb.CreateTable(&User{})\n\n// will append \"ENGINE=InnoDB\" to the SQL statement when creating table `users`\ndb.Set(\"gorm:table_options\", \"ENGINE=InnoDB\").CreateTable(&User{})\n```\n\n### Drop table\n\n```go\n// Drop model `User`'s table\ndb.DropTable(&User{})\n\n// Drop table `users`\ndb.DropTable(\"users\")\n\n// Drop model's `User`'s table and table `products`\ndb.DropTableIfExists(&User{}, \"products\")\n```\n\n### ModifyColumn\n\nModify column's type to given value\n\n```go\n// change column description's data type to `text` for model `User`\ndb.Model(&User{}).ModifyColumn(\"description\", \"text\")\n```\n\n### DropColumn\n\n```go\n// Drop column description from model `User`\ndb.Model(&User{}).DropColumn(\"description\")\n```\n\n### Add Foreign Key\n\n```go\n// Add foreign key\n// 1st param : foreignkey field\n// 2nd param : destination table(id)\n// 3rd param : ONDELETE\n// 4th param : ONUPDATE\ndb.Model(&User{}).AddForeignKey(\"city_id\", \"cities(id)\", \"RESTRICT\", \"RESTRICT\")\n```\n\n### Indexes\n\n```go\n// Add index for columns `name` with given name `idx_user_name`\ndb.Model(&User{}).AddIndex(\"idx_user_name\", \"name\")\n\n// Add index for columns `name`, `age` with given name `idx_user_name_age`\ndb.Model(&User{}).AddIndex(\"idx_user_name_age\", \"name\", \"age\")\n\n// Add unique index\ndb.Model(&User{}).AddUniqueIndex(\"idx_user_name\", \"name\")\n\n// Add unique index for multiple columns\ndb.Model(&User{}).AddUniqueIndex(\"idx_user_name_age\", \"name\", \"age\")\n\n// Remove index\ndb.Model(&User{}).RemoveIndex(\"idx_user_name\")\n```"]],[0,0],[2181,2181]]],[1518540333969,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,0,"migration"]],[0,2181],[0,0]]],[1518540334052,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,0,"\n"]],[0,0],[0,0]]],[1518540334302,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,0,"==="]],[0,0],[0,0]]],[1518540334386,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,3,"\n"]],[0,0],[0,0]]],[1518540334470,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,2,"\n"]],[0,0],[0,0]]],[1518540334555,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,0,"\n"]],[0,0],[0,0]]],[1518540334638,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,0,"\n"]],[0,0],[0,0]]],[1518540334722,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,0,"#"]],[0,0],[0,0]]],[1518540338445,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,15,"#"]],[0,0],[13,13]]],[1518540339431,["jinzhu@jinzhus-MacBook-Pro.local",[[1,13,"\n"]],[12,12],[13,13]]],[1518540344896,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,479,"#"]],[479,479],[478,478]]],[1518540347743,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,628,"#"]],[628,628],[627,627]]],[1518540350276,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,861,"#"]],[860,860],[859,859]]],[1518540352965,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,1078,"#"]],[1078,1078],[1077,1077]]],[1518540355244,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,1381,"#"]],[1381,1381],[1380,1380]]],[1518540357782,["jinzhu@jinzhus-MacBook-Pro.local",[[-1,1629,"#"]],[1628,1628],[1627,1627]]],[1518540367541,["jinzhu@jinzhus-MacBook-Pro.local",[[1,1630,"Add "]],[1630,1630],[1634,1634]]]]]]}